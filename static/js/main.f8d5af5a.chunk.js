(this["webpackJsonpbullet-time"]=this["webpackJsonpbullet-time"]||[]).push([[0],{222:function(e,t,n){e.exports=n.p+"static/media/header.7b6f2411.jpg"},229:function(e,t,n){e.exports=n.p+"static/media/acronyms.74aea95b.sqlite"},241:function(e,t,n){e.exports=n(427)},250:function(e,t){},252:function(e,t){},284:function(e,t){},285:function(e,t){},423:function(e,t,n){},424:function(e,t,n){},425:function(e,t,n){},426:function(e,t,n){},427:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),i=n.n(o),c=n(96),l=n(97),u=n(107),s=n(108),m=n(139),d=n.n(m),f=n(230),h=n(478),g=n(472),E=n(231),p=n(53),v=n(461),b=n(222),y=n.n(b),C=n(469),S=n(470),k=n(63),x=n(471),O=n(228),w=n.n(O),T=(n(3),n(481)),j=n(464),z=n(466),F=n(467),D=n(468),R=n(227),B=n.n(R),M=Object(v.a)({list:{width:250}});function A(e){var t=M();return r.a.createElement("div",null,r.a.createElement(T.a,{open:e.open,onClose:e.toggleDrawer(!1)},r.a.createElement("div",{className:t.list,role:"presentation",onClick:e.toggleDrawer(!1),onKeyDown:e.toggleDrawer(!1)},r.a.createElement(j.a,null,r.a.createElement(z.a,{button:!0,component:"a",href:"https://github.com/smpentecost/BulletTime/tree/master",target:"_blank"},r.a.createElement(F.a,null,r.a.createElement(B.a,null)),r.a.createElement(D.a,{primary:"View Source"}))))))}var N=Object(v.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function G(){var e=N(),t=r.a.useState({open_drawer:!1}),n=Object(p.a)(t,2),a=n[0],o=n[1],i=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&o(Object(E.a)({},a,{open_drawer:e}))}};return r.a.createElement("div",{className:e.root},r.a.createElement(C.a,{position:"static"},r.a.createElement("img",{src:y.a,style:{objectFit:"cover",maxHeight:"40px"}}),r.a.createElement(S.a,null,r.a.createElement(x.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:i(!0)},r.a.createElement(w.a,null)),r.a.createElement(k.a,{variant:"h6",className:e.title},"Bullet Time"))),r.a.createElement(A,{toggleDrawer:function(){return i()},open:a.open_drawer}))}var I=n(104),W=n(16),L=n(482);function _(e){var t=Object(a.useState)(null),n=Object(p.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(e.db),l=Object(p.a)(c,2),u=l[0],s=(l[1],Boolean(o)),m=function(t){i(null);var n=new W.SelectionState.createEmpty(e.blockKey).set("anchorOffset",e.start).set("focusOffset",e.end),a=W.Modifier.replaceText(e.contentState,n,t.target.innerText);e.onChange(a)},d=function(e){};return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{open:s,anchorEl:o,onClose:function(){i(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},function(){var t,n=e.decoratedText.replace(/\s/g," "),a=[],o=Object(I.a)(function(e,t){var n=e.exec("SELECT pair_id FROM words WHERE word LIKE '"+t.replace(/\s/g," ")+"';"),a=null,r=[];if(n.length){a=n[0].values[0];var o=e.exec("SELECT word FROM words WHERE pair_id = "+a+";");o.length&&(r=o[0].values)}return r}(u,n));try{for(o.s();!(t=o.n()).done;){var i=t.value;a.push(r.a.createElement(z.a,{button:!0,key:i,onMouseOver:d,onClick:m},r.a.createElement(D.a,null,i)))}}catch(c){o.e(c)}finally{o.f()}return r.a.createElement(j.a,{dense:!0}," ",a," ")}()),r.a.createElement("span",{className:"acronym",onContextMenu:function(e){e.preventDefault(),i(e.currentTarget)}},e.children))}var K=n(428),U=n(476),H=n(477),$=n(483),q=n(479),J=n(474),P=n(473),V=n(475),X=Object(v.a)((function(e){return{root:{margin:e.spacing(1)}}}));function Q(e){var t=X(),n=r.a.useState({trim:0}),a=Object(p.a)(n,2),o=a[0],i=a[1],c=function(t){return function(n){var a=o.trim;if("string"===typeof t)"left"===t?a--:"right"===t&&a++,i({trim:a}),e.onTrim(a);else{var r=n.target.value;/^-?[0-9]*$/.test(r)&&(i({trim:r}),isNaN(r)?e.onTrim(0):e.onTrim(parseInt(r,10)))}}};return r.a.createElement(g.a,{container:!0,alignItems:"center",className:t.root},r.a.createElement(g.a,{item:!0},r.a.createElement(x.a,{color:"secondary",onClick:c("left")},r.a.createElement(P.a,{color:"primary"}))),r.a.createElement(g.a,{item:!0},r.a.createElement(q.a,{style:{width:80},value:o.trim,size:"small",label:"Trim",variant:"outlined",color:"secondary",onChange:c(),onBlur:function(e){return""===e.target.value||"-"===e.target.value?i({trim:0}):0},InputProps:{endAdornment:r.a.createElement(J.a,{position:"end"},"px")}})),r.a.createElement(g.a,{item:!0},r.a.createElement(x.a,{color:"secondary",onClick:c("right")},r.a.createElement(V.a,{color:"primary"}))))}var Y=Object(v.a)((function(e){return{title:{flexGrow:1}}}));function Z(e){var t=Y();return r.a.createElement(K.a,{elevation:6},r.a.createElement(C.a,{position:"static"},r.a.createElement(S.a,{variant:"dense"},r.a.createElement(k.a,{variant:"h6",className:t.title},"Spacing Menu"))),r.a.createElement(g.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(g.a,{item:!0},r.a.createElement(Q,{onTrim:function(t){return e.onTrim(t)}}),r.a.createElement(U.a,null)),r.a.createElement(g.a,{item:!0},r.a.createElement(H.a,{control:r.a.createElement($.a,{checked:e.graberized,onChange:function(){return e.onGraberize()}}),label:"Graberize"}))))}function ee(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{contentEditable:!1},"- "),r.a.createElement(W.EditorBlock,e))}n(423);function te(e){return r.a.createElement("div",{className:"guide",style:{width:e.position+"px"}})}n(424);function ne(e){return{component:ee}}function ae(e){return"bullet-block"}function re(e){return r.a.createElement(K.a,{elevation:6},r.a.createElement("div",{className:"guided-range"},r.a.createElement("div",{className:"bullet-range ".concat(e.disabled?"disabled":"")},r.a.createElement(W.Editor,{editorState:e.editorState,readOnly:e.disabled,onChange:function(t){return e.onChange(t)},blockRendererFn:ne,blockStyleFn:ae,onBlur:function(){return console.log("blur")},onFocus:function(){console.log("focus");var t=e.editorState,n=W.EditorState.moveFocusToEnd(t);e.onChange(n)}}),r.a.createElement("div",{id:"tail",onClick:function(){var t=e.editorState,n=new W.ContentBlock({text:"",key:Object(W.genKey)(),type:"unstyled"}),a=e.editorState.getCurrentContent().getBlockMap().set(n.key,n),r=W.ContentState.createFromBlockArray(a.toArray()),o=W.EditorState.moveFocusToEnd(W.EditorState.push(t,r,"insert-characters"));e.onChange(o)}},"- Start a new bullet...")),r.a.createElement(te,{position:e.guide})))}n(425);function oe(e){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){var n=t.current?t.current.offsetWidth:0;e.onChange(n)}),[e.content]),r.a.createElement("span",{ref:t,className:"ruler"},"- "+e.content)}function ie(e,t,n){for(var a=function(e){switch(e){case"\u2004":case"\u2006":case"\u2007":case"\u2009":case" ":return!0;default:return!1}},r=["\u2006","\u2009"," ","\u2004","\u2007"],o=[],i=[],c=e.split(""),l=c.findIndex(a);-1!==l;){o.push(l),i.push(r.findIndex((function(e){return e===c[l]})));var u=c.slice(l+1).findIndex(a);l=-1!==u?u+l+1:u}t>n-1?i=function(e){var t=e,n=e.slice(1).reduce((function(e,t,n,a){return t>a[e]?n:e}),0)+1;return t[n]--,t[n]<0&&(t[n]=0),t}(i):t<n-1&&(i=function(e){var t=e,n=e.slice().reduce((function(e,t,n,a){return t<a[e]?n:e}),0);return t[n]++,t[n]>4&&(t[n]=4),t}(i)),o.forEach((function(e,t){c[e]=r[i[t]]}));var s=c.join("");return[s,s===e]}var ce=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(c.a)(this,n),(a=t.call(this,e)).GUIDE_DEFAULT=763;var r=new W.CompositeDecorator([{strategy:function(t,n,a){!function(e,t,n){for(var a,r,o=t.getText();null!==(a=e.exec(o));)n(r=a.index,r+a[0].length)}(e.regexp,t,n)},component:_,props:{db:e.db,onChange:function(e){return a.handleContentChange(e)}}}]);return a.state={editorState:W.EditorState.createEmpty(r),bulletWidths:new Map,graberized:!1,guide:a.GUIDE_DEFAULT,regexp:a.props.regexp},a.cachedSelection=null,a}return Object(l.a)(n,[{key:"renderRulers",value:function(){var e=this,t=[];return this.state.editorState.getCurrentContent().getBlocksAsArray().forEach((function(n){t.push(r.a.createElement(oe,{onChange:function(t){return e.handleWidthMeasurement(n.getKey(),t)},content:n.getText()}))}),this),t}},{key:"graberizeContent",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.state.graberized,a=this.state.editorState,r=a.getCurrentContent(),o=r.getBlockMap(),i=this.state.bulletWidths,c=Object(I.a)(i.entries());try{for(c.s();!(e=c.n()).done;){var l=e.value,u=l[0],s=l[1][0],m=l[1][1],d=r.getBlockForKey(u);if(d){if(!m||t){var f=[];if(n){var h=this.state.guide;f=ie(d.getText(),s,h)}else f=[d.getText().replace(/[\u2004\u2006\u2007\u2009]/g," "),!0];var g=new W.ContentBlock({text:f[0],key:u,type:"unstyled"});o=o.set(u,g),i.set(u,[s,f[1]])}}else i.delete(u)}}catch(v){c.e(v)}finally{c.f()}var E=W.ContentState.createFromBlockArray(o.toArray()),p=W.EditorState.push(a,E,"insert-characters");this.setState({editorState:p,bulletWidths:i})}},{key:"handleGraberize",value:function(){var e=this,t=!this.state.graberized;this.setState({graberized:t},(function(){return e.graberizeContent(!0)}))}},{key:"handleEditorChange",value:function(e){e.getCurrentContent().getPlainText();var t=e.getSelection(),n=t.getHasFocus(),a=t.getAnchorKey(),r=t.getAnchorOffset(),o=t.getFocusKey(),i=t.getFocusOffset();console.log(n,a,r,o,i),this.setState({editorState:e})}},{key:"handleContentChange",value:function(e){var t=this.state.editorState;this.cachedSelection||(this.cachedSelection=t.getSelection());var n=W.EditorState.push(t,e);this.handleEditorChange(n)}},{key:"handleWidthMeasurement",value:function(e,t){var n=this.state.bulletWidths,a=this.state.guide;n.set(e,[t,!(t-a)]),this.setState({bulletWidths:n}),this.graberizeContent()}},{key:"handleTrim",value:function(e){var t=this.GUIDE_DEFAULT+e;this.setState({guide:t}),this.graberizeContent(!0)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(g.a,{container:!0,spacing:1},r.a.createElement(g.a,{item:!0,xs:!0},r.a.createElement(re,{editorState:this.state.editorState,guide:this.state.guide,disabled:this.state.graberized,onChange:function(t){return e.handleEditorChange(t)},onWidthMeasurement:function(t,n){return e.handleWidthMeasurement(t,n)}})),r.a.createElement(g.a,{item:!0},r.a.createElement(Z,{graberized:this.state.graberized,onGraberize:function(){return e.handleGraberize()},onTrim:function(t){return e.handleTrim(t)}}))),this.state.graberized&&this.renderRulers())}}]),n}(r.a.Component),le=n(229),ue=n.n(le),se=(n(426),Object(f.a)({palette:{primary:{main:"#0d0811"},secondary:{main:"#08ff11"}}})),me=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={acronymDb:null,err:null,acronymRegExp:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;d()().then((function(t){var n=new XMLHttpRequest;n.open("GET",ue.a,!0),n.responseType="arraybuffer",n.onload=function(a){var r=new Uint8Array(n.response),o=new t.Database(r);e.setState({acronymDb:o},e.getRegExp)},n.send()})).catch((function(t){return e.setState({err:t})}))}},{key:"getRegExp",value:function(){var e=this.state.acronymDb.exec("SELECT word FROM words;")[0].values,t="\\b("+(e=e.sort((function(e,t){return t[0].length-e[0].length}))).join("|").replace(/[\\[.+*?%&(){^$]/g,"\\$&")+")(?=([\\s;\\.]|$))";t=t.replace(/\s/g,"\\s"),this.setState({acronymRegExp:new RegExp(t,"gi")})}},{key:"renderComposer",value:function(){return this.state.acronymRegExp?r.a.createElement(ce,{regexp:this.state.acronymRegExp,db:this.state.acronymDb}):r.a.createElement("pre",null,"Loading...")}},{key:"render",value:function(){return r.a.createElement(h.a,{theme:se},r.a.createElement(g.a,{container:!0,direction:"column",spacing:1},r.a.createElement(g.a,{item:!0},r.a.createElement(G,null)),r.a.createElement(g.a,{item:!0},this.renderComposer())))}}]),n}(r.a.Component);i.a.render(r.a.createElement(me,null),document.getElementById("root"))}},[[241,1,2]]]);
//# sourceMappingURL=main.f8d5af5a.chunk.js.map