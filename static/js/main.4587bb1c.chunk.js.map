{"version":3,"sources":["bullet_time/images/header.jpg","bullet_time/data/acronyms.sqlite","bullet_time/component/Drawer.jsx","bullet_time/component/PageDialog.jsx","bullet_time/data/DialogContent.jsx","bullet_time/component/AppBar.jsx","bullet_time/component/AcronymDecorator.jsx","bullet_time/logic/Utils.js","bullet_time/component/TrimController.jsx","bullet_time/component/BulletMenu.jsx","bullet_time/component/Bullet.jsx","bullet_time/component/Guide.jsx","bullet_time/component/BulletRange.jsx","bullet_time/component/Ruler.jsx","bullet_time/logic/GraberUtils.js","bullet_time/component/BulletComposer.jsx","bullet_time/App.jsx","index.jsx"],"names":["module","exports","useStyles","makeStyles","list","width","TemporaryDrawer","props","classes","Drawer","open","onClose","toggleDrawer","className","role","onClick","onKeyDown","List","ListItem","button","component","href","target","ListItemIcon","ListItemText","primary","Divider","viewLicense","PageDialog","DialogTitle","withStyles","theme","root","margin","padding","spacing","closeButton","position","right","top","color","palette","grey","children","other","disableTypography","Typography","variant","IconButton","aria-label","DialogContent","MuiDialogContent","handleClose","handleDialog","Dialog","aria-labelledby","id","title","dividers","content","flexGrow","menuButton","marginRight","ButtonAppBar","React","useState","open_drawer","state","setState","dialogOpen","setDialogOpen","gutterBottom","dialog","setDialog","event","type","key","AppBar","src","HeaderImage","style","objectFit","maxHeight","Toolbar","edge","setDialogContent","AcronymDecorator","anchorEl","setAnchorEl","db","Boolean","handleClick","selection","SelectionState","createEmpty","blockKey","set","start","end","newContentState","Modifier","replaceText","contentState","innerText","onChange","handlePreview","Popover","anchorOrigin","vertical","horizontal","transformOrigin","decoratedText","replace","itemRenders","arg","result","exec","pair_id","items","length","values","itemResult","getMenuOptions","item","push","onMouseOver","dense","renderMenuOptions","onContextMenu","preventDefault","currentTarget","Trim","trim","onTrim","input","value","test","isNaN","parseInt","Grid","container","alignItems","ChevronLeft","TextField","size","label","onBlur","InputProps","endAdornment","InputAdornment","ChevronRight","BulletMenu","Paper","elevation","direction","FormControlLabel","control","Switch","checked","graberized","onGraberize","Bullet","contentEditable","Guide","bulletRenderer","contentBlock","bulletBlockStyle","BulletRange","forwardRef","ref","disabled","editorState","readOnly","blockRendererFn","blockStyleFn","newBlock","ContentBlock","text","genKey","blockMap","getCurrentContent","getBlockMap","ContentState","createFromBlockArray","toArray","newEditorState","EditorState","moveFocusToEnd","guide","Ruler","useRef","useEffect","current","offsetWidth","graberSpace","bullet","lastOp","isWhiteSpace","element","rank","spaces","ranks","bulletArray","split","findIndex","elem","subArrayPosition","slice","Op","newRanks","indexOfMaxValue","reduce","iMax","x","i","arr","demote","indexOfMinValue","iMin","promote","forEach","index","newBullet","join","BulletComposer","GUIDE_DEFAULT","compositeDecorator","CompositeDecorator","strategy","callback","regex","matchArr","getText","findWithRegex","regexp","handleContentChange","bulletWidths","Map","editorRef","createRef","rulers","this","getBlocksAsArray","block","handleWidthMeasurement","getKey","forceReview","graberize","entries","entry","finished","getBlockForKey","newWidth","delete","graberizeContent","cb","createWithContent","handleEditorChange","blur","metadata","get","xs","handleGraberize","handleTrim","renderRulers","Component","createMuiTheme","main","secondary","BulletTime","acronymDb","err","acronymRegExp","initSqlJs","then","SQL","xhr","XMLHttpRequest","AcronymList","responseType","onload","e","uInt8Array","Uint8Array","response","Database","getRegExp","send","catch","regexp_def","sort","a","b","filter","RegExp","ThemeProvider","renderComposer","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4587bb1c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header.7b6f2411.jpg\";","module.exports = __webpack_public_path__ + \"static/media/acronyms.74aea95b.sqlite\";","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport Description from '@material-ui/icons/Description';\n\nconst useStyles = makeStyles({\n  list: {\n    width: 250,\n  },\n});\n\n\nexport default function TemporaryDrawer(props) {\n  const classes = useStyles();\n  const preventDefault = (event) => event.preventDefault();\n\n  const list = () => (\n    <div\n      className={classes.list}\n      role=\"presentation\"\n      onClick={props.toggleDrawer(false)}\n      onKeyDown={props.toggleDrawer(false)}\n    >\n      <List>\n        <ListItem\n          button\n          component=\"a\"\n          href=\"https://github.com/smpentecost/BulletTime/tree/master\"\n          target=\"_blank\"\n        >\n          <ListItemIcon><GitHubIcon /></ListItemIcon>\n          <ListItemText primary='View Source' />\n        </ListItem>\n        <Divider/>\n        <ListItem\n          button\n          onClick={props.viewLicense}\n        >\n          <ListItemIcon><Description /></ListItemIcon>\n          <ListItemText primary='License' />\n        </ListItem>\n\n      </List>\n    </div>\n  );\n\n  return (\n    <div>\n      <Drawer open={props.open} onClose={props.toggleDrawer(false)}>\n        {list()}\n      </Drawer>\n    </div>\n  );\n}\n","import React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport { withStyles } from '@material-ui/core/styles';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\n\nexport default function PageDialog(props) {\n\n  const styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n  });\n\n  const DialogTitle = withStyles(styles)((props) => {\n    const { children, classes, onClose, ...other } = props;\n    return (\n      <MuiDialogTitle disableTypography className={classes.root} {...other}>\n        <Typography variant=\"h6\">{children}</Typography>\n        {onClose ? (\n          <IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        ) : null}\n      </MuiDialogTitle>\n    );\n  });\n  \n  const DialogContent = withStyles((theme) => ({\n    root: {\n      padding: theme.spacing(2),\n    },\n  }))(MuiDialogContent);\n  \n  const handleClose = () => {\n    props.handleDialog(false);\n  };\n\n  return (\n    <div>\n      <Dialog onClose={handleClose} aria-labelledby=\"customized-dialog-title\" open={props.open}>\n        <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n          {props.title}\n        </DialogTitle>\n        <DialogContent dividers>\n          {props.content}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\nexport const About = () => {\n  const title = \"About Bullet Time\";\n  const content = (\n      <>\n        <Typography gutterBottom>\n          Bullet Time was created to ease the formatting burden that often accompanies Air Force style bullet writing. The application is not finished but new features are being added all the time. For now, Bullet Time offers the following:\n        </Typography>\n        <Typography gutterBottom>\n          <h4>Auto-Spacing (Graberization)</h4>\n          Bullet Time can automatically replace standard space characters with alternative whitespace characters in order to meet length requirements. These new characters are supported by PDF documents and will allow you to ensure your bullets fill an entire line exactly. Simply turn on \"Graberization\" and then copy and paste the bullets into your form. If you are working in a form with a different line width, change the Trim value in the Spacing Menu.\n        </Typography>\n        <Typography gutterBottom>\n          <h4>Acronym/Abbreviation Replacement</h4>\n        Bullet Time supports acronym/abbreviation recognition and replacement. As you write your bullet, if a word is <span className=\"acronym\">highlighted green</span> you can right click it to get a list of approved replacements. Note: The list of approved replacements is not currently customizable but that feature is in the works.\n      </Typography>\n    </>\n  );\n\n  return [title, content];\n};\n\nexport const License = () => {\n  const title = \"License\";\n  const content = (\n    <>\n      <Typography gutterBottom>\n        MIT License\n        <br /><br />\n        Copyright (c) 2020 Seeley Michael Pentecost\n        <br /><br />\n        Permission is hereby granted, free of charge, to any person obtaining a copy\n        of this software and associated documentation files (the \"Software\"), to deal\n        in the Software without restriction, including without limitation the rights\n        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n        copies of the Software, and to permit persons to whom the Software is\n        furnished to do so, subject to the following conditions:\n        <br /><br />\n        The above copyright notice and this permission notice shall be included in all\n        copies or substantial portions of the Software.\n        <br /><br />\n        THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n        SOFTWARE.\n      </Typography>\n    </>\n  );\n\n  return [title, content];\n};\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport HeaderImage from '../images/header.jpg';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\n\n\nimport Drawer from './Drawer';\nimport PageDialog from './PageDialog';\n\nimport { About, License } from '../data/DialogContent';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function ButtonAppBar() {\n  const classes = useStyles();\n  const [state, setState] = React.useState({open_drawer: false});\n  const [dialogOpen, setDialogOpen] = React.useState(true);\n  const [dialog, setDialog] = React.useState(About());\n\n  const toggleDrawer = (open) => (event) => {\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n\n    setState({ ...state, open_drawer: open});\n  };\n\n  const handleDialog = (dialogOpen) => {\n    setDialogOpen(dialogOpen);\n  };\n\n  const setDialogContent = (dialog) => {\n    setDialog(dialog);\n  };\n\n  const viewLicense = () => {\n    setDialogContent(License());\n    handleDialog(true);\n  };\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <img\n          src={HeaderImage}\n          style={{objectFit: 'cover', maxHeight: '40px'}}\n        />\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"menu\"\n            onClick={toggleDrawer(true)}>\n            <MenuIcon/>\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            Bullet Time\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <PageDialog\n          open={dialogOpen}\n          title={dialog[0]}\n          content={dialog[1]}\n          handleDialog={dialogOpen => handleDialog(dialogOpen)}\n        />\n      <Drawer\n        toggleDrawer={() => toggleDrawer()}\n        open={state[\"open_drawer\"]}\n        viewLicense={viewLicense}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport { List,\n         ListItem,\n         ListItemText,\n         Popover\n       } from '@material-ui/core';\nimport { useState } from 'react';\nimport { ContentBlock,\n         Modifier,\n         SelectionState\n       } from 'draft-js';\nimport { getMenuOptions } from '../logic/Utils.js';\n\nexport default function  AcronymDecorator(props) {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [db, setDb] = useState(props.db);\n  const open = Boolean(anchorEl);\n  \n  const handleContextMenu = (event) => {\n    event.preventDefault();\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClick = event => {\n    setAnchorEl(null);\n    const selection = new SelectionState\n          .createEmpty(props.blockKey)\n          .set(\"anchorOffset\", props.start)\n          .set(\"focusOffset\", props.end);\n    const newContentState = Modifier.replaceText(\n      props.contentState,\n      selection,\n      event.target.innerText,\n    );\n    props.onChange(newContentState);\n  };\n  \n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handlePreview = event => {\n    \n    // const previewBlock = new ContentBlock({\n    //   text: event.target.innerText,\n    //   key: props.children[0].props.block.getKey(),\n    //   type: 'unstyled',\n    // });\n    // const origSym = props.children[0];\n    // const preview = {\n    //   ...origSym,\n    //   props: {\n    //     ...origSym.props,\n    //     block: previewBlock,\n    //     text: event.target.innerText,\n    //   }\n    // };\n\n    // console.log(preview);\n    \n    // setContent([preview]);\n  };\n\n  const renderMenuOptions = () => {\n    const key = props.decoratedText.replace(/\\s/g, ' ');\n    let itemRenders = [];\n    for (const item of getMenuOptions(db, key)) {\n      itemRenders.push(\n        <ListItem button\n                  key={item}\n                  onMouseOver={handlePreview}\n                  onClick={handleClick}\n        >\n          <ListItemText>\n            {item}\n          </ListItemText>\n        </ListItem>\n      );\n    }\n    return (<List dense> {itemRenders} </List>);\n  };\n\n  return(\n    <>\n      <Popover\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        {renderMenuOptions()}\n      </Popover>\n      <span className=\"acronym\"\n            onContextMenu={handleContextMenu}\n      >\n        {props.children}\n      </span>\n    </>\n  );\n};\n","import initSqlJs from \"sql.js\";\n\nexport function findWithRegex(regex, contentBlock, callback) {\n    const text = contentBlock.getText();\n    let matchArr, start, end;\n    while ((matchArr = regex.exec(text)) !== null) {\n      start = matchArr.index;\n      end = start + matchArr[0].length;\n      callback(start, end);\n    }\n}\n\nexport function getMenuOptions(db, key){\n  let arg = key.replace(/\\s/g, ' ').replace(/'/g, \"''\").replace(/%/g, \"[%]\")\n  let result = db.exec(\n    \"SELECT pair_id FROM words WHERE word LIKE '\" + arg + \"';\"\n  );\n  let pair_id = null;\n  let items = [];\n  if (result.length) {\n    pair_id = result[0].values[0];\n    let itemResult = db.exec(\n      \"SELECT word FROM words WHERE pair_id = \" + pair_id + \";\"\n    )\n    if (itemResult.length) {\n      items=itemResult[0].values;\n    }\n  }\n  return items;\n};\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Container, Grid, IconButton, InputAdornment, TextField } from '@material-ui/core';\nimport { ChevronLeft, ChevronRight } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: theme.spacing(1),\n  },\n}));\n\n\nexport default function Trim(props) {\n  const classes = useStyles();\n  const [state, setState] = React.useState({trim: 0});\n\n  const onTrim = (arg) => (event) => {\n    const re = /^-?[0-9]*$/;\n    let trim = state.trim;\n    if (typeof arg === \"string\") {\n      if (arg === \"left\") {\n        trim--;\n      } else if (arg === \"right\") {\n        trim++;\n      }\n      setState({trim: trim});\n      props.onTrim(trim);\n    } else {\n      let input = event.target.value;\n      if (re.test(input)) {\n        setState({trim: input});\n        if (!isNaN(input)) {\n          props.onTrim(parseInt(input, 10));\n        } else {\n          props.onTrim(0);\n        }\n      }\n    }\n  };\n\n  return(\n    <Grid\n      container\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Grid item>\n        <IconButton\n          color=\"secondary\"\n          onClick={onTrim(\"left\")}\n        >\n          <ChevronLeft\n            color=\"primary\"\n          ></ChevronLeft>\n        </IconButton>\n      </Grid>\n      <Grid item>\n        <TextField\n          style={{width: 80}}\n          value={state.trim}\n          size=\"small\"\n          label=\"Trim\"\n          variant=\"outlined\"\n          color=\"secondary\"\n          onChange={onTrim()}\n          onBlur={(event) => (\n            event.target.value === \"\" || event.target.value === \"-\" ? setState({trim: 0}):0\n          )}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">px</InputAdornment>,\n          }}\n        />\n      </Grid>\n      <Grid item>\n        <IconButton\n          color=\"secondary\"\n          onClick={onTrim(\"right\")}\n        >\n          <ChevronRight\n            color=\"primary\"\n          ></ChevronRight>\n        </IconButton>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppBar,\n         Divider,\n         FormControlLabel,\n         Grid,\n         Paper,\n         Switch,\n         Toolbar,\n         Typography } from '@material-ui/core';\nimport TrimController from './TrimController';\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    flexGrow: 1,\n  },\n}));\n\n\nexport default function BulletMenu(props) {\n  const classes = useStyles();\n  \n  return(\n    <Paper elevation={6}>\n      <AppBar position=\"static\">\n        <Toolbar variant=\"dense\">\n          <Typography\n            variant=\"h6\"\n            className={classes.title}\n          >\n            Spacing Menu\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n      >\n        <Grid item>\n          <TrimController\n            onTrim={(arg) => props.onTrim(arg)}\n          />\n          <Divider/>\n        </Grid>\n        <Grid item>\n          <FormControlLabel\n            control=\n              {<Switch\n                 checked={props.graberized}\n                 onChange={() => props.onGraberize()}\n               />}\n            label=\"Graberize\"\n          />\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n}\n","import React from 'react';\nimport { EditorBlock } from 'draft-js';\nexport default function Bullet(props) {\n  return (\n    <>\n      <span contentEditable={false}>\n        {'- '}\n      </span>\n      <EditorBlock  {...props}/>\n    </>\n  );\n}\n\n","import React from 'react';\nimport '../style/Guide.css';\n\nexport default function Guide(props) {\n  return(\n    <div\n      className=\"guide\"\n      style={{width: props.position+\"px\"}}\n    ></div>\n  );\n}\n","// 3rd party imports\nimport React from 'react';\nimport { useRef } from 'react';\nimport { ContentBlock,\n         ContentState,\n         Editor,\n         EditorState,\n         genKey\n       } from 'draft-js';\nimport { Paper } from '@material-ui/core';\n\n// Components\nimport Bullet from './Bullet';\nimport Guide from './Guide';\n\n// Style\nimport '../style/BulletRange.css';\n\nfunction bulletRenderer(contentBlock) {\n  return {\n    component: Bullet,\n  };\n}\n\nfunction bulletBlockStyle(contentBlock) {\n  return 'bullet-block';\n}\n\nexport const BulletRange = React.forwardRef((props, ref) => {\n\n  const handleNewBullet = () => {\n    const editorState = props.editorState;\n    const newBlock = new ContentBlock({\n      text: '',\n      key: genKey(),\n      type: 'unstyled',\n    });\n\n    const content = props.editorState.getCurrentContent();\n    let blockMap = content.getBlockMap().set(newBlock.key, newBlock);\n    const newContentState = ContentState.createFromBlockArray(blockMap.toArray());\n\n    const newEditorState = EditorState.moveFocusToEnd(\n      EditorState.push(\n        editorState,\n        newContentState,\n        'insert-characters'\n      )\n    );\n    props.onChange(newEditorState);\n  };\n\n  return(\n    <Paper elevation={6}>\n      <div className=\"guided-range\">\n        <div className={`bullet-range ${props.disabled ? \"disabled\" : \"\"}`}>\n          <Editor\n            ref = {ref}\n            editorState={props.editorState}\n            readOnly={props.disabled}\n            onChange={editorState => props.onChange(editorState)}\n            blockRendererFn={bulletRenderer}\n            blockStyleFn={bulletBlockStyle}\n          />\n          <div\n            id=\"tail\"\n            onClick={handleNewBullet}\n          >\n            - Start a new bullet...\n          </div>\n        </div>\n        <Guide position={props.guide}/>\n      </div>\n    </Paper>\n  );\n});\n\n","import React from 'react';\nimport { useEffect, useRef } from 'react';\nimport '../style/Ruler.css';\n\n\nexport default function Ruler(props) {\n  const ref = useRef(null);\n\n  // Report the width any time the content changes\n  useEffect(() => {\n    let width = ref.current ? ref.current.offsetWidth: 0;\n    props.onChange(width);\n  }, [props.content]);\n  \n  return (\n    <span ref={ref} className=\"ruler\">\n      {'- ' + props.content}\n    </span>\n  );\n}\n","export function  graberSpace(bullet, width, guide, lastOp) {\n  /*\n    The best way to do this is recursively, changing a single\n    character at once and checking length as we go. That is because\n    these spaces don't have specific pixel widths associated with\n    them. Instead their widths are dynamic - based on font style,\n    size and the other characters around them. So while it sucks\n    that we need to use synchronous logic, atleast it only happens\n    when the user toggles the spacing on.\n\n    The whitespace unicode available for use with an OPR:\n    2006:approx-2px(smallest), 2009:approx-1px(small),\n    2004:approx+2px(big), 2007:approx+4px(biggest)\n  */\n\n  const promote = (ranks) => {\n    let newRanks = ranks;\n    // promote left to right\n    let indexOfMinValue = ranks.reduce((iMin, x, i, arr) => x < arr[iMin] ? i : iMin, 4);\n    newRanks[indexOfMinValue]++;\n    // Don't promote past max rank\n    if (newRanks[indexOfMinValue] > 4) {\n      newRanks[indexOfMinValue] = 4;\n    }\n    return(newRanks);\n  };\n\n  const demote = (ranks) => {\n    let newRanks = ranks;\n    // demote right to left\n    let indexOfMaxValue = ranks.reduce((iMax, x, i, arr) => x >= arr[iMax] ? i : iMax, 0);\n    newRanks[indexOfMaxValue]--;\n    // Don't demote below min rank\n    if (newRanks[indexOfMaxValue] < 0) {\n      newRanks[indexOfMaxValue] = 0;\n    }\n    return(newRanks);\n  };\n\n  const isWhiteSpace = (element) => {\n    switch(element) {\n    case \"\\u2004\": return true;\n    case \"\\u2006\": return true;\n    case \"\\u2007\": return true;\n    case \"\\u2009\": return true;\n    case \" \": return true;\n    default: return false;\n    }\n  };\n\n  const rank = ['\\u2006', '\\u2009', ' ', '\\u2004', '\\u2007'];\n\n  let spaces = [];\n  let ranks = [];\n  let bulletArray = bullet.split('');\n  \n  //Find all the white space character indexes\n  let position = bulletArray.findIndex(isWhiteSpace);\n  while (position !== -1) {\n    spaces.push(position);\n    ranks.push(rank.findIndex(elem => elem === bulletArray[position]));\n    let subArrayPosition = bulletArray.slice(position + 1).findIndex(isWhiteSpace);\n    if (subArrayPosition !== -1) {\n      position = subArrayPosition + position + 1;\n    } else {\n      position = subArrayPosition;\n    }\n  }\n\n  let Op = null;\n  if (width > guide-1) {\n    ranks = demote(ranks);\n    Op = 'demote';\n  } else if (width < guide-1) {\n    if (!lastOp || lastOp === 'promote'){\n      ranks = promote(ranks);\n      Op = 'promote';\n    } else {\n      Op = null;\n    }\n  }\n\n  spaces.forEach((position, index) => {\n    bulletArray[position] = rank[ranks[index]];\n  });\n\n  let newBullet = bulletArray.join('');\n  let finished = (newBullet === bullet);\n\n  return [newBullet, finished, Op];\n}\n","// 3rd party imports\nimport React from 'react';\nimport { Grid } from '@material-ui/core';\nimport { CompositeDecorator,\n         ContentBlock,\n         ContentState,\n         EditorState,\n         Modifier,\n         SelectionState,\n         genKey\n       } from 'draft-js';\n\n//Components\nimport AcronymDecorator from './AcronymDecorator';\nimport BulletMenu from './BulletMenu';\nimport { BulletRange } from './BulletRange';\nimport Ruler from './Ruler';\n\n//Logic\nimport { graberSpace } from '../logic/GraberUtils.js';\nimport { findWithRegex } from '../logic/Utils.js';\n\n\n/* This component holds the editor and menus associated with the\n * bullets. For now, it is essentially the top level component,\n * ignoring the header and app drawer.\n */\nexport default class BulletComposer extends React.Component {\n\n  GUIDE_DEFAULT = 763;\n\n  constructor(props) {\n    super(props);\n\n    const  acronymStrategy = (contentBlock, callback, contentState) =>{\n      findWithRegex(props.regexp, contentBlock, callback);\n    };\n\n    this.compositeDecorator = new CompositeDecorator([\n      {\n        strategy:acronymStrategy,\n        component:AcronymDecorator,\n        props:{\n          db: props.db,\n          onChange: contentState =>\n            this.handleContentChange(contentState)\n        }\n      },\n    ]);\n\n    this.state = {\n      editorState: EditorState.createEmpty(this.compositeDecorator),\n      bulletWidths: new Map(),\n      graberized: false,\n      guide: this.GUIDE_DEFAULT, //px\n      regexp: this.props.regexp,\n    };\n\n    this.editorRef = React.createRef();\n  }\n\n  renderRulers() {\n    let rulers = [];\n    const blockArray = this.state.editorState\n          .getCurrentContent()\n          .getBlocksAsArray();\n\n    blockArray.forEach((block) => {\n      rulers.push(\n        <Ruler\n          onChange={(width) => this.handleWidthMeasurement(block.getKey(), width)}\n          content={block.getText()}\n        />\n      );\n    }, this);\n\n    return(rulers);\n  }\n\n  graberizeContent(forceReview=false) {\n    const graberize = this.state.graberized;\n    let editorState = this.state.editorState;\n    let content = editorState.getCurrentContent();\n    let blockMap = content.getBlockMap(); //resetting\n    let bulletWidths = this.state.bulletWidths;\n    for (const entry of bulletWidths.entries()) {\n      const key = entry[0];\n      const width = entry[1][0];\n      const finished = entry[1][1];\n      const lastOp = entry[1][2];\n      const block = content.getBlockForKey(key);\n      if (block) {\n        if (!finished || forceReview) {\n          let newWidth = 0;\n          let result = [];\n          if (graberize) {\n            const guide = this.state.guide;\n            result = graberSpace(block.getText(), width, guide, lastOp);\n            newWidth = width;\n          } else {\n            result = [block.getText().replace(/[\\u2004\\u2006\\u2007\\u2009]/g,' '), true, null];\n          }\n          const newBlock = new ContentBlock({\n            text: result[0],\n            key: key,\n            type: 'unstyled',\n          });\n          \n          blockMap = blockMap.set(key, newBlock);\n          bulletWidths.set(key, [newWidth, result[1], result[2]]);\n        }\n      } else {\n        bulletWidths.delete(key);\n      }\n    }\n    const newContentState = ContentState.createFromBlockArray(blockMap.toArray());\n    const newEditorState = EditorState.push(\n      editorState,\n      newContentState,\n      'insert-characters'\n    );\n    this.setState({editorState: newEditorState,\n                   bulletWidths: bulletWidths});\n  }\n\n  handleGraberize() {\n    const graberize = !this.state.graberized;\n    this.setState({graberized: graberize}, () => this.graberizeContent(true));\n  }\n\n  handleEditorChange(editorState, cb=null) {\n    this.setState({editorState}, cb);\n  };\n\n  handleContentChange(contentState) {\n    const editorState = this.state.editorState;\n    let newEditorState = EditorState.createWithContent(\n      contentState,\n      this.compositeDecorator\n    );\n    const cb = () => {\n      this.editorRef.current.blur();\n    };\n    this.handleEditorChange(newEditorState, cb);\n  };\n\n  handleWidthMeasurement(key, width) {\n    let bulletWidths = this.state.bulletWidths;\n    let metadata = bulletWidths.get(key);\n    let lastOp = null;\n    if (metadata) {\n      lastOp = metadata[2];\n    }\n    const guide = this.state.guide;\n    bulletWidths.set(key, [width, !(width-guide), lastOp]);\n    this.setState({bulletWidths});\n    this.graberizeContent();\n  }\n\n  handleTrim(arg) {\n    const guide = this.GUIDE_DEFAULT + arg;\n    this.setState({guide});\n    this.graberizeContent(true);\n  }\n\n  render() {\n    return (\n      <div>\n        <Grid container spacing={1}>\n          <Grid item xs>\n            <BulletRange\n              ref={this.editorRef}\n              editorState={this.state.editorState}\n              guide={this.state.guide}\n              disabled={this.state.graberized}\n              onChange={editorState => this.handleEditorChange(editorState)}\n            />\n          </Grid>\n          <Grid item>\n            <BulletMenu\n              graberized={this.state.graberized}\n              onGraberize={() => this.handleGraberize()}\n              onTrim={(arg) => this.handleTrim(arg)}\n            />\n          </Grid>\n        </Grid>\n        {this.state.graberized && this.renderRulers()}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport initSqlJs from \"sql.js\";\nimport { useState } from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { Grid } from '@material-ui/core';\n\n// Components\nimport AppBar from './component/AppBar';\nimport BulletComposer from './component/BulletComposer';\n\n// Data\nimport AcronymList from './data/acronyms.sqlite';\n\n// Style\nimport './App.css';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#0d0811',\n    },\n    secondary: {\n      main: '#08ff11',\n    },\n  },\n});\n      \nexport default class BulletTime extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      acronymDb: null,\n      err: null,\n      acronymRegExp: null,\n    };\n  }\n\n  componentDidMount() {\n    // sql.js needs to fetch its wasm file, so we cannot immediately\n    // instantiate the database without any configuration, initSqlJs\n    // will fetch the wasm files directly from the same path as the js\n    // see ../config-overrides.js\n    initSqlJs()\n      .then(SQL => {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', AcronymList , true);\n        xhr.responseType = 'arraybuffer';\n  \n        xhr.onload = e => {\n          var uInt8Array = new Uint8Array(xhr.response);\n          var db = new SQL.Database(uInt8Array);\n          this.setState({ acronymDb: db }, this.getRegExp);\n        };\n        xhr.send();\n      })\n      .catch(err => this.setState({ err }));\n  }\n\n  getRegExp() {\n    let db = this.state.acronymDb;\n    let result = db.exec(\"SELECT word FROM words;\")[0].values;\n    result = result.sort((a, b) => {return b[0].length-a[0].length;});\n    result = result.filter(x => x[0].length > 1);\n  \n    let regexp_def = \"\\\\b(\" + result.join(\"|\").replace(/[\\\\[.+*?%&(){^$]/g, \"\\\\$&\") + \")(?=([\\\\s;\\\\.]|$))\";\n    regexp_def = regexp_def.replace(/\\s/g, \"\\\\s\"); //Enable matches even after graberizing\n\n    this.setState({acronymRegExp: new RegExp(regexp_def, \"gi\")});\n  }\n\n  renderComposer() {\n    let regexp = this.state.acronymRegExp;\n    if (!regexp) return <pre>Loading...</pre>;\n\n    return <BulletComposer\n             regexp={this.state.acronymRegExp}\n             db={this.state.acronymDb}\n           />;\n  }\n  \n  render() {\n    return (\n      <ThemeProvider theme={theme}>\n        <Grid\n          container\n          direction=\"column\"\n          spacing={1}\n        >\n          <Grid item>\n            <AppBar />\n          </Grid>\n          <Grid item>\n            {this.renderComposer()}\n          </Grid>\n        </Grid>\n      </ThemeProvider>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./bullet_time/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}