{"version":3,"sources":["bullet_time/images/header.jpg","bullet_time/data/acronyms.sqlite","bullet_time/component/Drawer.jsx","bullet_time/component/AppBar.jsx","bullet_time/component/AcronymDecorator.jsx","bullet_time/logic/Utils.js","bullet_time/component/TrimController.jsx","bullet_time/component/BulletMenu.jsx","bullet_time/component/Bullet.jsx","bullet_time/component/Guide.jsx","bullet_time/component/BulletRange.jsx","bullet_time/component/Ruler.jsx","bullet_time/logic/GraberUtils.js","bullet_time/component/BulletComposer.jsx","bullet_time/App.jsx","index.jsx"],"names":["module","exports","useStyles","makeStyles","list","width","TemporaryDrawer","props","classes","Drawer","open","onClose","toggleDrawer","className","role","onClick","onKeyDown","List","ListItem","button","component","href","target","ListItemIcon","ListItemText","primary","theme","root","flexGrow","menuButton","marginRight","spacing","title","ButtonAppBar","React","useState","open_drawer","state","setState","event","type","key","AppBar","position","src","HeaderImage","style","objectFit","maxHeight","Toolbar","IconButton","edge","color","aria-label","Typography","variant","AcronymDecorator","anchorEl","setAnchorEl","db","Boolean","handleClick","selection","SelectionState","createEmpty","blockKey","set","start","end","newContentState","Modifier","replaceText","contentState","innerText","onChange","handlePreview","Popover","anchorOrigin","vertical","horizontal","transformOrigin","decoratedText","replace","itemRenders","arg","console","log","result","exec","pair_id","items","length","values","itemResult","getMenuOptions","item","push","onMouseOver","dense","renderMenuOptions","onContextMenu","preventDefault","currentTarget","children","margin","Trim","trim","onTrim","input","value","test","isNaN","parseInt","Grid","container","alignItems","ChevronLeft","TextField","size","label","onBlur","InputProps","endAdornment","InputAdornment","ChevronRight","BulletMenu","Paper","elevation","direction","Divider","FormControlLabel","control","Switch","checked","graberized","onGraberize","Bullet","contentEditable","Guide","bulletRenderer","contentBlock","bulletBlockStyle","BulletRange","disabled","editorState","readOnly","blockRendererFn","blockStyleFn","onFocus","newEditorState","EditorState","moveFocusToEnd","id","newBlock","ContentBlock","text","genKey","blockMap","getCurrentContent","getBlockMap","ContentState","createFromBlockArray","toArray","guide","Ruler","ref","useRef","useEffect","current","offsetWidth","content","graberSpace","bullet","isWhiteSpace","element","rank","spaces","ranks","bulletArray","split","findIndex","elem","subArrayPosition","slice","newRanks","indexOfMaxValue","reduce","iMax","x","i","arr","demote","indexOfMinValue","iMin","promote","forEach","index","newBullet","join","BulletComposer","GUIDE_DEFAULT","compositeDecorator","CompositeDecorator","strategy","callback","regex","matchArr","getText","findWithRegex","regexp","handleContentChange","bulletWidths","Map","cachedSelection","rulers","this","getBlocksAsArray","block","handleWidthMeasurement","getKey","forceReview","graberize","entries","entry","finished","getBlockForKey","delete","graberizeContent","getPlainText","selectionstate","getSelection","hasFocus","getHasFocus","anchorKey","getAnchorKey","anchor","getAnchorOffset","focusKey","getFocusKey","focus","getFocusOffset","handleEditorChange","xs","onWidthMeasurement","handleGraberize","handleTrim","renderRulers","Component","createMuiTheme","palette","main","secondary","BulletTime","acronymDb","err","acronymRegExp","initSqlJs","then","SQL","xhr","XMLHttpRequest","AcronymList","responseType","onload","e","uInt8Array","Uint8Array","response","Database","getRegExp","send","catch","regexp_def","sort","a","b","RegExp","ThemeProvider","renderComposer","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5c7e3839.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header.7b6f2411.jpg\";","module.exports = __webpack_public_path__ + \"static/media/acronyms.74aea95b.sqlite\";","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport GitHubIcon from '@material-ui/icons/GitHub';\n\nconst useStyles = makeStyles({\n  list: {\n    width: 250,\n  },\n});\n\n\nexport default function TemporaryDrawer(props) {\n  const classes = useStyles();\n  const preventDefault = (event) => event.preventDefault();\n\n  const list = () => (\n    <div\n      className={classes.list}\n      role=\"presentation\"\n      onClick={props.toggleDrawer(false)}\n      onKeyDown={props.toggleDrawer(false)}\n    >\n      <List>\n        <ListItem\n          button\n          component=\"a\"\n          href=\"https://github.com/smpentecost/BulletTime/tree/master\"\n          target=\"_blank\"\n        >\n          <ListItemIcon><GitHubIcon /></ListItemIcon>\n          <ListItemText primary='View Source' />\n        </ListItem>\n      </List>\n    </div>\n  );\n\n  return (\n    <div>\n      <Drawer open={props.open} onClose={props.toggleDrawer(false)}>\n        {list()}\n      </Drawer>\n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport HeaderImage from '../images/header.jpg';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport Drawer from './Drawer';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function ButtonAppBar() {\n  const classes = useStyles();\n  const [state, setState] = React.useState({open_drawer: false});\n\n  const toggleDrawer = (open) => (event) => {\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n\n    setState({ ...state, open_drawer: open});\n  };\n\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <img\n          src={HeaderImage}\n          style={{objectFit: 'cover', maxHeight: '40px'}}\n        />\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"menu\"\n            onClick={toggleDrawer(true)}>\n            <MenuIcon/>\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            Bullet Time\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        toggleDrawer={() => toggleDrawer()}\n        open={state[\"open_drawer\"]}/>\n    </div>\n  );\n}\n","import React from 'react';\nimport { List,\n         ListItem,\n         ListItemText,\n         Popover\n       } from '@material-ui/core';\nimport { useState } from 'react';\nimport { ContentBlock,\n         Modifier,\n         SelectionState\n       } from 'draft-js';\nimport { getMenuOptions } from '../logic/Utils.js';\n\nexport default function  AcronymDecorator(props) {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [db, setDb] = useState(props.db);\n  const open = Boolean(anchorEl);\n  \n  const handleContextMenu = (event) => {\n    event.preventDefault();\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClick = event => {\n    setAnchorEl(null);\n    const selection = new SelectionState\n          .createEmpty(props.blockKey)\n          .set(\"anchorOffset\", props.start)\n          .set(\"focusOffset\", props.end);\n    const newContentState = Modifier.replaceText(\n      props.contentState,\n      selection,\n      event.target.innerText,\n    );\n    props.onChange(newContentState);\n  };\n  \n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handlePreview = event => {\n    \n    // const previewBlock = new ContentBlock({\n    //   text: event.target.innerText,\n    //   key: props.children[0].props.block.getKey(),\n    //   type: 'unstyled',\n    // });\n    // const origSym = props.children[0];\n    // const preview = {\n    //   ...origSym,\n    //   props: {\n    //     ...origSym.props,\n    //     block: previewBlock,\n    //     text: event.target.innerText,\n    //   }\n    // };\n\n    // console.log(preview);\n    \n    // setContent([preview]);\n  };\n\n  const renderMenuOptions = () => {\n    const key = props.decoratedText.replace(/\\s/g, ' ');\n    let itemRenders = [];\n    for (const item of getMenuOptions(db, key)) {\n      itemRenders.push(\n        <ListItem button\n                  key={item}\n                  onMouseOver={handlePreview}\n                  onClick={handleClick}\n        >\n          <ListItemText>\n            {item}\n          </ListItemText>\n        </ListItem>\n      );\n    }\n    return (<List dense> {itemRenders} </List>);\n  };\n\n  return(\n    <>\n      <Popover\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        {renderMenuOptions()}\n      </Popover>\n      <span className=\"acronym\"\n            onContextMenu={handleContextMenu}\n      >\n        {props.children}\n      </span>\n    </>\n  );\n};\n","import initSqlJs from \"sql.js\";\n\nexport function findWithRegex(regex, contentBlock, callback) {\n    const text = contentBlock.getText();\n    let matchArr, start, end;\n    while ((matchArr = regex.exec(text)) !== null) {\n      start = matchArr.index;\n      end = start + matchArr[0].length;\n      callback(start, end);\n    }\n}\n\nexport function getMenuOptions(db, key){\n  let arg = key.replace(/\\s/g, ' ').replace(/'/g, \"''\")\n  console.log(arg)\n  let result = db.exec(\n    \"SELECT pair_id FROM words WHERE word LIKE '\" + arg + \"';\"\n  );\n  let pair_id = null;\n  let items = [];\n  if (result.length) {\n    pair_id = result[0].values[0];\n    let itemResult = db.exec(\n      \"SELECT word FROM words WHERE pair_id = \" + pair_id + \";\"\n    )\n    if (itemResult.length) {\n      items=itemResult[0].values;\n    }\n  }\n  return items;\n};\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Container, Grid, IconButton, InputAdornment, TextField } from '@material-ui/core';\nimport { ChevronLeft, ChevronRight } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: theme.spacing(1),\n  },\n}));\n\n\nexport default function Trim(props) {\n  const classes = useStyles();\n  const [state, setState] = React.useState({trim: 0});\n\n  const onTrim = (arg) => (event) => {\n    const re = /^-?[0-9]*$/;\n    let trim = state.trim;\n    if (typeof arg === \"string\") {\n      if (arg === \"left\") {\n        trim--;\n      } else if (arg === \"right\") {\n        trim++;\n      }\n      setState({trim: trim});\n      props.onTrim(trim);\n    } else {\n      let input = event.target.value;\n      if (re.test(input)) {\n        setState({trim: input});\n        if (!isNaN(input)) {\n          props.onTrim(parseInt(input, 10));\n        } else {\n          props.onTrim(0);\n        }\n      }\n    }\n  };\n\n  return(\n    <Grid\n      container\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Grid item>\n        <IconButton\n          color=\"secondary\"\n          onClick={onTrim(\"left\")}\n        >\n          <ChevronLeft\n            color=\"primary\"\n          ></ChevronLeft>\n        </IconButton>\n      </Grid>\n      <Grid item>\n        <TextField\n          style={{width: 80}}\n          value={state.trim}\n          size=\"small\"\n          label=\"Trim\"\n          variant=\"outlined\"\n          color=\"secondary\"\n          onChange={onTrim()}\n          onBlur={(event) => (\n            event.target.value === \"\" || event.target.value === \"-\" ? setState({trim: 0}):0\n          )}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">px</InputAdornment>,\n          }}\n        />\n      </Grid>\n      <Grid item>\n        <IconButton\n          color=\"secondary\"\n          onClick={onTrim(\"right\")}\n        >\n          <ChevronRight\n            color=\"primary\"\n          ></ChevronRight>\n        </IconButton>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppBar,\n         Divider,\n         FormControlLabel,\n         Grid,\n         Paper,\n         Switch,\n         Toolbar,\n         Typography } from '@material-ui/core';\nimport TrimController from './TrimController';\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    flexGrow: 1,\n  },\n}));\n\n\nexport default function BulletMenu(props) {\n  const classes = useStyles();\n  \n  return(\n    <Paper elevation={6}>\n      <AppBar position=\"static\">\n        <Toolbar variant=\"dense\">\n          <Typography\n            variant=\"h6\"\n            className={classes.title}\n          >\n            Spacing Menu\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n      >\n        <Grid item>\n          <TrimController\n            onTrim={(arg) => props.onTrim(arg)}\n          />\n          <Divider/>\n        </Grid>\n        <Grid item>\n          <FormControlLabel\n            control=\n              {<Switch\n                 checked={props.graberized}\n                 onChange={() => props.onGraberize()}\n               />}\n            label=\"Graberize\"\n          />\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n}\n","import React from 'react';\nimport { EditorBlock } from 'draft-js';\nexport default function Bullet(props) {\n  return (\n    <>\n      <span contentEditable={false}>\n        {'- '}\n      </span>\n      <EditorBlock  {...props}/>\n    </>\n  );\n}\n\n","import React from 'react';\nimport '../style/Guide.css';\n\nexport default function Guide(props) {\n  return(\n    <div\n      className=\"guide\"\n      style={{width: props.position+\"px\"}}\n    ></div>\n  );\n}\n","// 3rd party imports\nimport React from 'react';\nimport { ContentBlock,\n         ContentState,\n         Editor,\n         EditorState,\n         genKey\n       } from 'draft-js';\nimport { Paper } from '@material-ui/core';\n\n// Components\nimport Bullet from './Bullet';\nimport Guide from './Guide';\n\n// Style\nimport '../style/BulletRange.css';\n\nfunction bulletRenderer(contentBlock) {\n  return {\n    component: Bullet,\n  };\n}\n\nfunction bulletBlockStyle(contentBlock) {\n  return 'bullet-block';\n}\n\nexport default function BulletRange(props) {\n\n  const handleFocus = () => {\n    console.log('focus');\n    const editorState = props.editorState;\n    const newEditorState = EditorState.moveFocusToEnd(editorState);\n    props.onChange(newEditorState);\n  };\n    \n\n  const handleNewBullet = () => {\n    const editorState = props.editorState;\n    const newBlock = new ContentBlock({\n      text: '',\n      key: genKey(),\n      type: 'unstyled',\n    });\n\n    const content = props.editorState.getCurrentContent();\n    let blockMap = content.getBlockMap().set(newBlock.key, newBlock);\n    const newContentState = ContentState.createFromBlockArray(blockMap.toArray());\n\n    const newEditorState = EditorState.moveFocusToEnd(\n      EditorState.push(\n        editorState,\n        newContentState,\n        'insert-characters'\n      )\n    );\n    props.onChange(newEditorState);\n  };\n\n  return(\n    <Paper elevation={6}>\n      <div className=\"guided-range\">\n        <div className={`bullet-range ${props.disabled ? \"disabled\" : \"\"}`}>\n           <Editor\n             editorState={props.editorState}\n             readOnly={props.disabled}\n             onChange={editorState => props.onChange(editorState)}\n             blockRendererFn={bulletRenderer}\n             blockStyleFn={bulletBlockStyle}\n             onBlur={() => console.log('blur')}\n             onFocus={handleFocus}\n           />\n          <div\n            id=\"tail\"\n            onClick={handleNewBullet}\n          >\n            - Start a new bullet...\n          </div>\n        </div>\n        <Guide position={props.guide}/>\n      </div>\n    </Paper>\n  );\n}\n\n","import React from 'react';\nimport { useEffect, useRef } from 'react';\nimport '../style/Ruler.css';\n\n\nexport default function Ruler(props) {\n  const ref = useRef(null);\n\n  // Report the width any time the content changes\n  useEffect(() => {\n    let width = ref.current ? ref.current.offsetWidth: 0;\n    props.onChange(width);\n  }, [props.content]);\n  \n  return (\n    <span ref={ref} className=\"ruler\">\n      {'- ' + props.content}\n    </span>\n  );\n}\n","export function  graberSpace(bullet, width, guide) {\n  /*\n    The best way to do this is recursively, changing a single\n    character at once and checking length as we go. That is because\n    these spaces don't have specific pixel widths associated with\n    them. Instead their widths are dynamic - based on font style,\n    size and the other characters around them. So while it sucks\n    that we need to use synchronous logic, atleast it only happens\n    when the user toggles the spacing on.\n\n    The whitespace unicode available for use with an OPR:\n    2006:approx-2px(smallest), 2009:approx-1px(small),\n    2004:approx+2px(big), 2007:approx+4px(biggest)\n  */\n\n  const promote = (ranks) => {\n    let newRanks = ranks;\n    var indexOfMinValue = ranks.slice().reduce((iMin, x, i, arr) => x < arr[iMin] ? i : iMin, 0);\n    newRanks[indexOfMinValue]++;\n    if (newRanks[indexOfMinValue] > 4) {\n      newRanks[indexOfMinValue] = 4;\n    }\n    return(newRanks);\n  };\n\n  const demote = (ranks) => {\n    let newRanks = ranks;\n    // Intentionally slicing so that we don't change the first space\n    var indexOfMaxValue = ranks.slice(1).reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0) + 1;\n    newRanks[indexOfMaxValue]--;\n    if (newRanks[indexOfMaxValue] < 0) {\n      newRanks[indexOfMaxValue] = 0;\n    }\n    return(newRanks);\n  };\n\n  const isWhiteSpace = (element) => {\n    switch(element) {\n    case \"\\u2004\": return true;\n    case \"\\u2006\": return true;\n    case \"\\u2007\": return true;\n    case \"\\u2009\": return true;\n    case \" \": return true;\n    default: return false;\n    }\n  };\n\n  const rank = ['\\u2006', '\\u2009', ' ', '\\u2004', '\\u2007'];\n\n  let spaces = [];\n  let ranks = [];\n  let bulletArray = bullet.split(\"\");\n  \n  //Find all the white space character indexes\n  let position = bulletArray.findIndex(isWhiteSpace);\n  while (position !== -1) {\n    spaces.push(position);\n    ranks.push(rank.findIndex(elem => elem === bulletArray[position]));\n    let subArrayPosition = bulletArray.slice(position + 1).findIndex(isWhiteSpace);\n    if (subArrayPosition !== -1) {\n      position = subArrayPosition + position + 1;\n    } else {\n      position = subArrayPosition;\n    }\n  }\n\n  if (width > guide-1) {\n    ranks = demote(ranks);\n  } else if (width < guide-1) {\n    ranks = promote(ranks);\n  }\n\n    // console.log(ranks);\n  // console.log(width);\n\n    spaces.forEach((position, index) => {\n      bulletArray[position] = rank[ranks[index]];\n    });\n\n  let newBullet = bulletArray.join('');\n  let finished = (newBullet === bullet);\n\n  return [newBullet, finished];\n}\n","// 3rd party imports\nimport React from 'react';\nimport { Grid } from '@material-ui/core';\nimport { CompositeDecorator,\n         ContentBlock,\n         ContentState,\n         EditorState,\n         Modifier,\n         SelectionState,\n         genKey\n       } from 'draft-js';\n\n//Components\nimport AcronymDecorator from './AcronymDecorator';\nimport BulletMenu from './BulletMenu';\nimport BulletRange from './BulletRange';\nimport Ruler from './Ruler';\n\n//Logic\nimport { graberSpace } from '../logic/GraberUtils.js';\nimport { findWithRegex } from '../logic/Utils.js';\n\n\n/* This component holds the editor and menus associated with the\n * bullets. For now, it is essentially the top level component,\n * ignoring the header and app drawer.\n */\nexport default class BulletComposer extends React.Component {\n\n  GUIDE_DEFAULT = 763;\n\n  constructor(props) {\n    super(props);\n\n    const  acronymStrategy = (contentBlock, callback, contentState) =>{\n      findWithRegex(props.regexp, contentBlock, callback);\n    };\n\n    const compositeDecorator = new CompositeDecorator([\n      {\n        strategy:acronymStrategy,\n        component:AcronymDecorator,\n        props:{\n          db: props.db,\n          onChange: contentState =>\n            this.handleContentChange(contentState)\n        }\n      },\n    ]);\n\n    this.state = {\n      editorState: EditorState.createEmpty(compositeDecorator),\n      bulletWidths: new Map(),\n      graberized: false,\n      guide: this.GUIDE_DEFAULT, //px\n      regexp: this.props.regexp,\n    };\n\n    this.cachedSelection = null;\n  }\n\n  renderRulers() {\n    let rulers = [];\n    const blockArray = this.state.editorState\n          .getCurrentContent()\n          .getBlocksAsArray();\n\n    blockArray.forEach((block) => {\n      rulers.push(\n        <Ruler\n          onChange={(width) => this.handleWidthMeasurement(block.getKey(), width)}\n          content={block.getText()}\n        />\n      );\n    }, this);\n\n    return(rulers);\n  }\n\n  graberizeContent(forceReview=false) {\n    const graberize = this.state.graberized;\n    let editorState = this.state.editorState;\n    let content = editorState.getCurrentContent();\n    let blockMap = content.getBlockMap(); //resetting\n    let bulletWidths = this.state.bulletWidths;\n    for (const entry of bulletWidths.entries()) {\n      const key = entry[0];\n      const width = entry[1][0];\n      const finished = entry[1][1];\n      const block = content.getBlockForKey(key);\n      if (block) {\n        if (!finished || forceReview) {\n          let result = [];\n          if (graberize) {\n            const guide = this.state.guide;\n            result = graberSpace(block.getText(), width, guide);\n          } else {\n            result = [block.getText().replace(/[\\u2004\\u2006\\u2007\\u2009]/g,' '), true];\n          }\n          const newBlock = new ContentBlock({\n            text: result[0],\n            key: key,\n            type: 'unstyled',\n          });\n          \n          blockMap = blockMap.set(key, newBlock);\n          bulletWidths.set(key, [width, result[1]]);\n        }\n      } else {\n        bulletWidths.delete(key);\n      }\n    }\n    const newContentState = ContentState.createFromBlockArray(blockMap.toArray());\n    const newEditorState = EditorState.push(\n      editorState,\n      newContentState,\n      'insert-characters'\n    );\n    this.setState({editorState: newEditorState,\n                   bulletWidths: bulletWidths});\n  }\n\n  handleGraberize() {\n    const graberize = !this.state.graberized;\n    this.setState({graberized: graberize}, () => this.graberizeContent(true));\n  }\n\n  handleEditorChange(editorState) {\n    let text = editorState.getCurrentContent().getPlainText();\n    let selectionstate = editorState.getSelection();\n    let hasFocus = selectionstate.getHasFocus();\n    let anchorKey = selectionstate.getAnchorKey();\n    let anchor = selectionstate.getAnchorOffset();\n    let focusKey = selectionstate.getFocusKey();\n    let focus = selectionstate.getFocusOffset();\n    console.log(hasFocus, anchorKey, anchor, focusKey, focus);\n    // if (!anchor && this.cachedSelection) {\n    //   let newEditorState = EditorState.forceSelection(\n    //     editorState,\n    //     this.cachedSelection\n    //   );\n    //   this.cachedSelection = null;\n    //   this.setState({editorState: newEditorState});\n      \n    // } else {\n      this.setState({editorState});\n//    }\n  };\n\n  handleContentChange(contentState) {\n    const editorState = this.state.editorState;\n    if (!this.cachedSelection) {\n      this.cachedSelection = editorState.getSelection();\n    }\n    const newEditorState = EditorState.push(\n      editorState,\n      contentState\n    );\n    this.handleEditorChange(newEditorState);\n  };\n\n  handleWidthMeasurement(key, width) {\n    let bulletWidths = this.state.bulletWidths;\n    const guide = this.state.guide;\n    bulletWidths.set(key, [width, !(width-guide)]);\n    this.setState({bulletWidths});\n    this.graberizeContent();\n  }\n\n  handleTrim(arg) {\n    const guide = this.GUIDE_DEFAULT + arg;\n    this.setState({guide});\n    this.graberizeContent(true);\n  }\n\n  render() {\n    return (\n      <div>\n        <Grid container spacing={1}>\n          <Grid item xs>\n            <BulletRange\n              editorState={this.state.editorState}\n              guide={this.state.guide}\n              disabled={this.state.graberized}\n              onChange={editorState => this.handleEditorChange(editorState)}\n              onWidthMeasurement={(key, width) => this.handleWidthMeasurement(key, width)}\n            />\n          </Grid>\n          <Grid item>\n            <BulletMenu\n              graberized={this.state.graberized}\n              onGraberize={() => this.handleGraberize()}\n              onTrim={(arg) => this.handleTrim(arg)}\n            />\n          </Grid>\n        </Grid>\n        {this.state.graberized && this.renderRulers()}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport initSqlJs from \"sql.js\";\nimport { useState } from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { Grid } from '@material-ui/core';\n\n// Components\nimport AppBar from './component/AppBar';\nimport BulletComposer from './component/BulletComposer';\n\n// Data\nimport AcronymList from './data/acronyms.sqlite';\n\n// Style\nimport './App.css';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#0d0811',\n    },\n    secondary: {\n      main: '#08ff11',\n    },\n  },\n});\n      \nexport default class BulletTime extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      acronymDb: null,\n      err: null,\n      acronymRegExp: null,\n    };\n  }\n\n  componentDidMount() {\n    // sql.js needs to fetch its wasm file, so we cannot immediately\n    // instantiate the database without any configuration, initSqlJs\n    // will fetch the wasm files directly from the same path as the js\n    // see ../config-overrides.js\n    initSqlJs()\n      .then(SQL => {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', AcronymList , true);\n        xhr.responseType = 'arraybuffer';\n  \n        xhr.onload = e => {\n          var uInt8Array = new Uint8Array(xhr.response);\n          var db = new SQL.Database(uInt8Array);\n          this.setState({ acronymDb: db }, this.getRegExp);\n        };\n        xhr.send();\n      })\n      .catch(err => this.setState({ err }));\n  }\n\n  getRegExp() {\n    let db = this.state.acronymDb;\n    let result = db.exec(\"SELECT word FROM words;\")[0].values;\n    result = result.sort((a, b) => {return b[0].length-a[0].length;});\n  \n    let regexp_def = \"\\\\b(\" + result.join(\"|\").replace(/[\\\\[.+*?%&(){^$]/g, \"\\\\$&\") + \")(?=([\\\\s;\\\\.]|$))\";\n    regexp_def = regexp_def.replace(/\\s/g, \"\\\\s\"); //Enable matches even after graberizing\n\n    this.setState({acronymRegExp: new RegExp(regexp_def, \"gi\")});\n  }\n\n  renderComposer() {\n    let regexp = this.state.acronymRegExp;\n    if (!regexp) return <pre>Loading...</pre>;\n\n    return <BulletComposer\n             regexp={this.state.acronymRegExp}\n             db={this.state.acronymDb}\n           />;\n  }\n  \n  render() {\n    return (\n      <ThemeProvider theme={theme}>\n        <Grid\n          container\n          direction=\"column\"\n          spacing={1}\n        >\n          <Grid item>\n            <AppBar />\n          </Grid>\n          <Grid item>\n            {this.renderComposer()}\n          </Grid>\n        </Grid>\n      </ThemeProvider>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./bullet_time/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}